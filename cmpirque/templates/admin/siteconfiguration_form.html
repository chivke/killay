{% extends "base.html" %}

{% block content %}

  <div id="admin-configuration-container" class="ui segment">
    <form id="admin-configuration-main-segment" class="ui form" method="post">
      <h1 class="ui dividing header">Admin Configuration</h1>
      {% csrf_token %}
      <div id="video-form" class="">
        <h4 class="ui dividing header">System fields</h4>
        {{ form.managment_form }}
          {% for hidden in form.hidden_fields %}
            {{ hidden }}
          {% endfor %}
        {% for field in form.visible_fields %}
          <div class="field {% if field.errors %}error{% endif %}">
            {% if field.name == "is_published" %}
              <div class="ui slider checkbox">
                <label>{{field.label}}</label>
                {{field}}
              </div>
            {% else %}
              <label>{{field.label}}</label>
              {{field}}
            {% endif %}
            {% if field.errors %}
                <div class="ui error message">{{field.errors}}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
      <div class="ui segment" id="socialmedia-formset-container">
        <h4 class="ui dividing header">Social Media</h4>
        {{ formset.management_form }}
        <table class="ui celled table">
          <thead>
            <tr id="socialmedia-head-fields">
              {% for form in formset %}
                {% if forloop.first %}
                  {% for field in form.visible_fields %}
                    <th>{{field.label}}</th>
                  {% endfor %}
                {% endif %}
              {% endfor %}
            </tr>
          </thead>
          <tbody id="video-providers-tbody">
            {% for form in formset %}
              <tr>
                {% for hidden in form.hidden_fields %}
                  {{ hidden }}
                {% endfor %}
                {% for field in form.visible_fields %}
                  <td class="field {% if field.errors %}error{% endif %}" data-label="{{field.help_text}}">
                    {% if field.name == "DELETE" or field.name == "is_visible" %}
                      <div class="ui checkbox">
                        {{field}}
                      </div>
                    {% else %}
                      {{ field }}
                    {% endif %}
                    {% if field.errors %}
                      <div class="ui error message">{{field.errors}}</div>
                    {% endif %}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <input type="submit" class="ui button" value="Save">
    </form>
  </div>

{% endblock content %}

{% block extra_js %}
<script type="text/javascript">
  $('.ui.checkbox')
    .checkbox()
  ;
</script>
{% endblock extra_js %}
